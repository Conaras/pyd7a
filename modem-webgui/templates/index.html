<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>D7 modem-webgui</title>
    <link rel="stylesheet" href="http://cdn.webix.com/edge/webix.css" type="text/css">
    <script src="http://cdn.webix.com/edge/webix.js" type="text/javascript"></script>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        var socket;
        var received_alp_commands = [];

        $(document).ready(function() {
            namespace = '';
            socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);

            socket.on('connect', function() {
                console.log('connected');
            });

            socket.on('module_info', function(data) {
                console.log('connected to module: ' + data.uid);
                $$('header').setValues({header:"oss7", status:
                        'Connected to ' + data.uid + ' using D7AP v' + data.d7ap_version + ' running app \'' + data.application_name +
                        '\' using git sha1 ' + data.git_sha1}
                )
            });

            socket.on('received_alp_command', function(msg) {
                received_alp_commands.push(msg);
                $$("received_alp_commands_list").clearAll();
                $$("received_alp_commands_list").parse(received_alp_commands);
            });
        });
    </script>
    <script type="text/javascript" src="/static/app.js"></script>
</head>
<body>
<script type="text/javascript" charset="utf-8">
    webix.ui(layout);
</script>
</body>
</html>